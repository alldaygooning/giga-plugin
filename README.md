# Описание
Maven плагин, с расширенным инструментарием для сборки веб-приложения
# Функционал
## Цели сборки проекта

**compile**  
Компиляция исходных кодов проекта.

**build**  
Компиляция исходных кодов проекта и их упаковка в исполняемый WAR-архив. Компиляцию исходников выполняет цель **compile**.

**clean**  
Удаление скомпилированных классов проекта и всех временных (временных) файлов.

**test**  
Запуск JUnit-тестов проекта. Перед этим автоматически выполняется сборка проекта через цель **build**.

**doc**  
1. Добавление в `MANIFEST.MF` MD5 и SHA-1 хешей файлов проекта.  
2. Генерация Javadoc по всем классам проекта и включение её в WAR-архив.

**native2ascii**  
Преобразование всех строковых ресурсов локализации в ASCII-формат для тестирования (все строковые параметры вынесены в файлы локализации).

**scp**  
Перенос собранного WAR-архива на удалённый сервер по SCP. Перед этим выполняется сборка проекта через цель **build**.

**music**  
Воспроизведение музыки по завершении сборки проекта (цель **build**).

**report**  
В случае успешного прохождения тестов:  
- Сохраняет отчёт JUnit в формате XML.  
- Добавляет отчёт в репозиторий Git и выполняет `git commit`.

**diff**  
Проверка состояния рабочей копии. Если изменения касаются классов, указанных в файле параметров, автоматически выполняется `git commit`.

**team**  
1. Получение из Git-репозитория трёх предыдущих ревизий.  
2. Сборка каждой ревизии (цель **build**).  
3. Упаковка трёх получившихся WAR-файлов в ZIP-архив.

**alt**  
Создание альтернативной версии программы с переименованными переменными и классами (использует задачи `replace`/`replaceregexp` из файлов параметров). Упаковка в веб-архив через цель **build**.
## Запуск
- **./mvnw com.RogaIKopytov:demo-plugin-eclipse:1.0:[goal] -D[property]=[value] -D[property]=[value] …**  
  Пример вызова внешнего плагина с указанием группы, артефакта, версии и цели.

- **./mvnw rik:[goal] -D[property]=[value] -D[property]=[value] …**  
  Вызов ваших собственных целей (`rik:build`, `rik:compile` и т. д.) с передачей любых дополнительных свойств.
## Использование
| Команда                                              | Описание                                                                                                                                                                          |
|------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <b>rik:build [src] [finalName] [manifestEntries]</b>  | Компиляция исходных кодов проекта и упаковка в исполняемый WAR-архив.                                                                                                               |
| <b>rik:compile [src]</b>                             | Компиляция исходных кодов проекта.                                                                                                                                                  |
| <b>rik:clean</b>                                     | Удаление скомпилированных классов проекта и всех временных файлов.                                                                                                                  |
| <b>rik:diff [configFile]</b>                         | Проверка состояния рабочей копии; если изменения касаются классов, указанных в файле параметров, выполняет `git commit`.                                                           |
| <b>rik:doc</b>                                       | Генерация Javadoc по всем классам проекта и добавление её в WAR-архив.                                                                                                              |
| <b>rik:hash [src]</b>                                | Вычисление MD5 и SHA-1 хешей исходных файлов проекта и добавление их в `MANIFEST.MF`.                                                                                              |
| <b>rik:music [soundFile]</b>                         | Воспроизведение музыки по завершении сборки и упаковки проекта в WAR-архив.                                                                                                         |
| <b>rik:n2a [src] [dst]</b>                           | Преобразование ресурсов локализации в ASCII-формат (native2ascii) для тестирования; все строковые параметры вынесены в файлы локализации.                                         |
| <b>rik:obfuscate</b>                                 | Создание обфусцированной копии директории с исходными файлами.                                                                                                                     |
| <b>rik:obfuscate-build</b>                           | Создание обфусцированной копии исходников, компиляция и сборка WAR-архива с использованием обфусцированных файлов.                                                                 |
| <b>rik:report [xmlSourceDirectory] [reportsDirectory]</b> | При успешных тестах сохраняет отчёт JUnit в формате XML, добавляет его в Git и выполняет `git commit`.                                                                                 |
| <b>rik:scp [server] [user] [port] [password] [dir]</b> | Перенос собранного WAR-архива на удалённый сервер по SCP. Перед этим автоматически выполняется сборка проекта (цель **build**).                                                     |
| <b>rik:snatch</b>                                    | Получение из Git трёх предыдущих ревизий, их сборка (цель **build**) и упаковка трёх WAR-файлов в ZIP-архив.                                                                         |
| <b>rik:test</b>                                      | Запуск JUnit-тестов проекта; перед этим автоматически выполняется сборка (цель **build**).                                                                                         |
